      {value: 'heart', element: 'wood', year: [1927, 1937, 1947, 1957, 1967, 1977,
       1987, 1997, 2007, 2017, 2027, 2037, 2047, 2057, 2067, 2077, 2087, 2097]  },
       {value: 'stomach', element: 'fire', year: [1928, 1938, 1948, 1958, 1968, 1978,
       1988, 1998, 2008, 2018, 2028, 2038, 2048, 2058, 2068, 2078, 2088, 2098]  },
       {value: 'spleen', element: 'earth', year: [1929, 1939, 1949, 1959, 1969, 1979,
       1989, 1999, 2009, 2019, 2029, 2039, 2049, 2059, 2069, 2079, 2089, 2099]  },
    ]
  def trunc_year_table
    [
      {value: 'gall bladder', element: 'earth', year: [1924, 1934, 1944, 1954, 1964, 1974, 1984,
        1994, 2004, 2014, 2024, 2034, 2044, 2054, 2064, 2074, 2084, 2094]  },
      {value: 'liver', element: 'metal', year: [1925, 1935, 1945, 1955, 1965, 1975, 1985, 1995,
       2005, 2015, 2025, 2035, 2045, 2055, 2065, 2075, 2085, 2095]  },
      {value: 'small intestine', element: 'water', year: [1926, 1936, 1946, 1956, 1966, 1976,
       1986, 1996, 2006, 2016, 2026, 2036, 2046, 2056, 2066, 2076, 2086, 2096]  },
      {value: 'heart', element: 'wood', year: [1927, 1937, 1947, 1957, 1967, 1977,
       1987, 1997, 2007, 2017, 2027, 2037, 2047, 2057, 2067, 2077, 2087, 2097]  },
       {value: 'stomach', element: 'fire', year: [1928, 1938, 1948, 1958, 1968, 1978,
       1988, 1998, 2008, 2018, 2028, 2038, 2048, 2058, 2068, 2078, 2088, 2098]  },
       {value: 'spleen', element: 'earth', year: [1929, 1939, 1949, 1959, 1969, 1979,
       1989, 1999, 2009, 2019, 2029, 2039, 2049, 2059, 2069, 2079, 2089, 2099]  },
    ]
exit
exit
  def trunc_year_table
    [
      {value: 'gall bladder', element: 'earth', year: [1924, 1934, 1944, 1954, 1964, 1974, 1984,
        1994, 2004, 2014, 2024, 2034, 2044, 2054, 2064, 2074, 2084, 2094]  },
      {value: 'liver', element: 'metal', year: [1925, 1935, 1945, 1955, 1965, 1975, 1985, 1995,
       2005, 2015, 2025, 2035, 2045, 2055, 2065, 2075, 2085, 2095]  },
      {value: 'small intestine', element: 'water', year: [1926, 1936, 1946, 1956, 1966, 1976,
       1986, 1996, 2006, 2016, 2026, 2036, 2046, 2056, 2066, 2076, 2086, 2096]  },
      {value: 'heart', element: 'wood', year: [1927, 1937, 1947, 1957, 1967, 1977,
       1987, 1997, 2007, 2017, 2027, 2037, 2047, 2057, 2067, 2077, 2087, 2097]  },
       {value: 'stomach', element: 'fire', year: [1928, 1938, 1948, 1958, 1968, 1978,
       1988, 1998, 2008, 2018, 2028, 2038, 2048, 2058, 2068, 2078, 2088, 2098]  },
       {value: 'spleen', element: 'earth', year: [1929, 1939, 1949, 1959, 1969, 1979,
       1989, 1999, 2009, 2019, 2029, 2039, 2049, 2059, 2069, 2079, 2089, 2099]  },
    ]
  end
trunc_year_table
  def trunc_year_table
    [
      {value: 'gall bladder', element: 'earth', year: [1924, 1934, 1944, 1954, 1964, 1974, 1984,
        1994, 2004, 2014, 2024, 2034, 2044, 2054, 2064, 2074, 2084, 2094]  },
      {value: 'liver', element: 'metal', year: [1925, 1935, 1945, 1955, 1965, 1975, 1985, 1995,
       2005, 2015, 2025, 2035, 2045, 2055, 2065, 2075, 2085, 2095]  },
      {value: 'small intestine', element: 'water', year: [1926, 1936, 1946, 1956, 1966, 1976,
       1986, 1996, 2006, 2016, 2026, 2036, 2046, 2056, 2066, 2076, 2086, 2096]  },
      {value: 'heart', element: 'wood', year: [1927, 1937, 1947, 1957, 1967, 1977,
       1987, 1997, 2007, 2017, 2027, 2037, 2047, 2057, 2067, 2077, 2087, 2097]  },
      {value: 'stomach', element: 'fire', year: [1928, 1938, 1948, 1958, 1968, 1978,
       1988, 1998, 2008, 2018, 2028, 2038, 2048, 2058, 2068, 2078, 2088, 2098]  },
      {value: 'spleen', element: 'earth', year: [1929, 1939, 1949, 1959, 1969, 1979,
       1989, 1999, 2009, 2019, 2029, 2039, 2049, 2059, 2069, 2079, 2089, 2099]  },
      {value: 'large intestine', element: 'metal', year: [1920, 1930, 1940, 1950, 1960, 1970,
       1980, 1990, 2000, 2010, 2020, 2030, 2040, 2050, 2060, 2070, 2080, 2090, 2100]  },
      {value: 'lung', element: 'water', year: [1921, 1931, 1941, 1951, 1961, 1971,
       1981, 1991, 2001, 2011, 2021, 2031, 2041, 2051, 2061, 2071, 2081, 2091, 2101]  },
    ]
  end
trunc_year_table
exit
 def trunc_year_table
    [
      {value: 'gall bladder', element: 'earth', year: [1924, 1934, 1944, 1954, 1964, 1974, 1984,
        1994, 2004, 2014, 2024, 2034, 2044, 2054, 2064, 2074, 2084, 2094]  },
      {value: 'liver', element: 'metal', year: [1925, 1935, 1945, 1955, 1965, 1975, 1985, 1995,
       2005, 2015, 2025, 2035, 2045, 2055, 2065, 2075, 2085, 2095]  },
      {value: 'small intestine', element: 'water', year: [1926, 1936, 1946, 1956, 1966, 1976,
       1986, 1996, 2006, 2016, 2026, 2036, 2046, 2056, 2066, 2076, 2086, 2096]  },
      {value: 'heart', element: 'wood', year: [1927, 1937, 1947, 1957, 1967, 1977,
       1987, 1997, 2007, 2017, 2027, 2037, 2047, 2057, 2067, 2077, 2087, 2097]  },
      {value: 'stomach', element: 'fire', year: [1928, 1938, 1948, 1958, 1968, 1978,
       1988, 1998, 2008, 2018, 2028, 2038, 2048, 2058, 2068, 2078, 2088, 2098]  },
      {value: 'spleen', element: 'earth', year: [1929, 1939, 1949, 1959, 1969, 1979,
       1989, 1999, 2009, 2019, 2029, 2039, 2049, 2059, 2069, 2079, 2089, 2099]  },
      {value: 'large intestine', element: 'metal', year: [1920, 1930, 1940, 1950, 1960, 1970,
       1980, 1990, 2000, 2010, 2020, 2030, 2040, 2050, 2060, 2070, 2080, 2090, 2100]  },
      {value: 'lung', element: 'water', year: [1921, 1931, 1941, 1951, 1961, 1971,
       1981, 1991, 2001, 2011, 2021, 2031, 2041, 2051, 2061, 2071, 2081, 2091, 2101]  },
      {value: 'bladder', element: 'wood', year: [1922, 1932, 1942, 1952, 1962, 1972,
       1982, 1992, 2002, 2012, 2022, 2032, 2042, 2052, 2062, 2072, 2082, 2092, 2102]  },
      {value: 'kidney', element: 'fire', year: [1923, 1933, 1943, 1953, 1963, 1973,
       1983, 1993, 2003, 2013, 2023, 2033, 2043, 2053, 2063, 2073, 2083, 2093, 2103]  },
    ]
  end
trunc_year_table
birth = DateTime.new(1999, 9, 18)
birth
def trunc_year_wu_yun_definition(birth)
    trunc_year_table.each do |elem|
      if elem[:year].include?(birth.year)
        return elem[:value], elem[:element]
      end
    end
  end
  trunc_year_wu_yun_definition(birth)
 def trunc_year_wu_yun_table
    [
      {value: 'gall bladder', element: 'earth', year: [1924, 1934, 1944, 1954, 1964, 1974, 1984,
        1994, 2004, 2014, 2024, 2034, 2044, 2054, 2064, 2074, 2084, 2094]  },
      {value: 'liver', element: 'metal', year: [1925, 1935, 1945, 1955, 1965, 1975, 1985, 1995,
       2005, 2015, 2025, 2035, 2045, 2055, 2065, 2075, 2085, 2095]  },
      {value: 'small intestine', element: 'water', year: [1926, 1936, 1946, 1956, 1966, 1976,
       1986, 1996, 2006, 2016, 2026, 2036, 2046, 2056, 2066, 2076, 2086, 2096]  },
      {value: 'heart', element: 'wood', year: [1927, 1937, 1947, 1957, 1967, 1977,
       1987, 1997, 2007, 2017, 2027, 2037, 2047, 2057, 2067, 2077, 2087, 2097]  },
      {value: 'stomach', element: 'fire', year: [1928, 1938, 1948, 1958, 1968, 1978,
       1988, 1998, 2008, 2018, 2028, 2038, 2048, 2058, 2068, 2078, 2088, 2098]  },
      {value: 'spleen', element: 'earth', year: [1929, 1939, 1949, 1959, 1969, 1979,
       1989, 1999, 2009, 2019, 2029, 2039, 2049, 2059, 2069, 2079, 2089, 2099]  },
      {value: 'large intestine', element: 'metal', year: [1920, 1930, 1940, 1950, 1960, 1970,
       1980, 1990, 2000, 2010, 2020, 2030, 2040, 2050, 2060, 2070, 2080, 2090, 2100]  },
      {value: 'lung', element: 'water', year: [1921, 1931, 1941, 1951, 1961, 1971,
       1981, 1991, 2001, 2011, 2021, 2031, 2041, 2051, 2061, 2071, 2081, 2091, 2101]  },
      {value: 'bladder', element: 'wood', year: [1922, 1932, 1942, 1952, 1962, 1972,
       1982, 1992, 2002, 2012, 2022, 2032, 2042, 2052, 2062, 2072, 2082, 2092, 2102]  },
      {value: 'kidney', element: 'fire', year: [1923, 1933, 1943, 1953, 1963, 1973,
       1983, 1993, 2003, 2013, 2023, 2033, 2043, 2053, 2063, 2073, 2083, 2093, 2103]  },
    ]
  end
  def trunc_year_wu_yun_definition(birth)
    trunc_year_wu_yun_table.each do |elem|
      if elem[:year].include?(birth.year)
        return elem[:value], elem[:element]
      end
    end
2-2
birth = DateTime.new(1965, 2, 18)
birt
birth
  def trunc_year_wu_yun_table
    [
      {value: 'gall bladder', element: 'earth', year: [1924, 1934, 1944, 1954, 1964, 1974, 1984,
        1994, 2004, 2014, 2024, 2034, 2044, 2054, 2064, 2074, 2084, 2094]  },
      {value: 'liver', element: 'metal', year: [1925, 1935, 1945, 1955, 1965, 1975, 1985, 1995,
       2005, 2015, 2025, 2035, 2045, 2055, 2065, 2075, 2085, 2095]  },
      {value: 'small intestine', element: 'water', year: [1926, 1936, 1946, 1956, 1966, 1976,
       1986, 1996, 2006, 2016, 2026, 2036, 2046, 2056, 2066, 2076, 2086, 2096]  },
      {value: 'heart', element: 'wood', year: [1927, 1937, 1947, 1957, 1967, 1977,
       1987, 1997, 2007, 2017, 2027, 2037, 2047, 2057, 2067, 2077, 2087, 2097]  },
      {value: 'stomach', element: 'fire', year: [1928, 1938, 1948, 1958, 1968, 1978,
       1988, 1998, 2008, 2018, 2028, 2038, 2048, 2058, 2068, 2078, 2088, 2098]  },
      {value: 'spleen', element: 'earth', year: [1929, 1939, 1949, 1959, 1969, 1979,
       1989, 1999, 2009, 2019, 2029, 2039, 2049, 2059, 2069, 2079, 2089, 2099]  },
      {value: 'large intestine', element: 'metal', year: [1920, 1930, 1940, 1950, 1960, 1970,
       1980, 1990, 2000, 2010, 2020, 2030, 2040, 2050, 2060, 2070, 2080, 2090, 2100]  },
      {value: 'lung', element: 'water', year: [1921, 1931, 1941, 1951, 1961, 1971,
       1981, 1991, 2001, 2011, 2021, 2031, 2041, 2051, 2061, 2071, 2081, 2091, 2101]  },
      {value: 'bladder', element: 'wood', year: [1922, 1932, 1942, 1952, 1962, 1972,
       1982, 1992, 2002, 2012, 2022, 2032, 2042, 2052, 2062, 2072, 2082, 2092, 2102]  },
      {value: 'kidney', element: 'fire', year: [1923, 1933, 1943, 1953, 1963, 1973,
       1983, 1993, 2003, 2013, 2023, 2033, 2043, 2053, 2063, 2073, 2083, 2093, 2103]  },
    ]
  end
  def trunc_year_wu_yun_definition(birth)
    trunc_year_wu_yun_table.each do |elem|
      if elem[:year].include?(birth.year)
        return elem[:value], elem[:element]
      end
    end
  end
  trunc_year_full = trunc_year_wu_yun_definition(birth)
  trunc_year_full
birth+=1.year
  trunc_year_full = trunc_year_wu_yun_definition(birth)
  trunc_year_full
full_trunc = 'large intestine'
  def empty_trunc_year_wu_yun_definition(full_trunc)
    case full_trunc
    when 'gall bladder' then [ 'spleen', 'earth' ]
    when 'liver' then [ 'large intestine', 'metal' ]
    when 'small intestine' then [ 'lung', 'water' ]
    when 'heart' then [ 'bladder', 'wood' ]
    when 'stomach' then [ 'kidney', 'fire' ]
    end
  end
empty_trunc = empty_trunc_year_wu_yun_definition(full_trunc)
empty_trun—Å
empty_trunc
full_trunc
 def empty_trunc_year_wu_yun_definition(full_trunc)
    case full_trunc
    when 'gall bladder' then [ 'spleen', 'earth' ]
    when 'liver' then [ 'large intestine', 'metal' ]
    when 'small intestine' then [ 'lung', 'water' ]
    when 'heart' then [ 'bladder', 'wood' ]
    when 'stomach' then [ 'kidney', 'fire' ]
    when 'large intestine' then [ 'liver',  'metal' ]
    when 'spleen' then ['gall bladder', 'earth' ]
    when 'small intestine' then [ 'lung', 'water']
    when 'bladder' then ['heart', 'wood' ]
    when 'kidney' then ['stomach', 'fire' ]
    end
  end
empty_trunc = empty_trunc_year_wu_yun_definition(full_trunc)
empty_trunc 
empty_trunc[0]
exit
